<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도서 상세 - ChaekMate</title>
    <link rel="stylesheet" href="/src/styles/book-detail.css">
</head>

<body>
    <!-- 상단 헤더 -->
    <header class="main-header">
        <div class="top-bar">
            <div class="container">
                <div class="top-menu">
                    <a href="/login.html">로그인</a>
                    <a href="/signup.html">회원가입</a>
                    <a href="#order">주문배송</a>
                    <a href="#customer">고객센터</a>
                </div>
            </div>
        </div>

        <div class="header-main">
            <div class="container">
                <h1 class="logo">
                    <a href="/home.html">ChaekMate</a>
                </h1>

                <div class="search-area">
                    <input type="text" class="search-input" placeholder="검색어를 입력하세요" id="searchInput">
                    <button class="search-btn">🔍</button>
                </div>

                <div class="header-icons">
                    <a href="/mypage.html" class="icon-link">
                        <span class="icon">👤</span>
                        <span>마이페이지</span>
                    </a>
                    <a href="/cart.html" class="icon-link">
                        <span class="icon">🛒</span>
                        <span>장바구니</span>
                    </a>
                </div>
            </div>
        </div>

        <nav class="main-nav">
            <div class="container">
                <ul class="nav-menu">
                    <li><a href="/bestseller.html">베스트셀러</a></li>
                    <li><a href="/new-books.html">신간</a></li>
                    <li><a href="/recommend.html">추천</a></li>
                    <li><a href="/compare.html">도서 비교</a></li>
                    <li><a href="/discuss.html">AI 책토론</a></li>
                    <li><a href="/event.html">이벤트</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- 메인 컨텐츠 -->
    <main class="main">
        <div class="container">
            <!-- 로딩 상태 -->
            <div class="loading-state" id="loadingState">
                <p style="font-size: 24px; font-weight: 700;">도서 정보를 불러오는 중...</p>
            </div>

            <!-- 책 기본 정보 (초기 숨김) -->
            <section class="book-main" id="bookMainSection" style="display: none;">
                <div class="book-image">
                    <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='350' height='500'%3E%3Crect fill='%23ddd' width='350' height='500'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999' font-size='20'%3E책 표지%3C/text%3E%3C/svg%3E"
                        alt="책 표지" id="bookCover">
                    <button class="wishlist-btn" id="wishlistBtn">
                        <span class="heart">♡</span>
                    </button>
                </div>

                <div class="book-info">
                    <div class="book-category" id="bookCategory">소설</div>
                    <h1 class="book-title" id="bookTitle"></h1>
                    <p class="book-author" id="bookAuthor"></p>

                    <div class="book-rating">
                        <div class="stars" id="ratingStars">★★★★☆</div>
                        <span class="rating-score" id="ratingScore">0.0</span>
                        <span class="rating-count" id="ratingCount">(0명)</span>
                    </div>

                    <div class="book-meta">
                        <div class="meta-row">
                            <span class="meta-label">출판사</span>
                            <span class="meta-value" id="publisher"></span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">출간일</span>
                            <span class="meta-value" id="publishDate"></span>
                        </div>
                        <div class="meta-row">
                            <span class="meta-label">ISBN</span>
                            <span class="meta-value" id="isbn"></span>
                        </div>
                    </div>

                    <div class="book-price-section">
                        <div class="price-label">정가</div>
                        <div class="price-amount" id="finalPrice"></div>
                    </div>

                    <div class="book-actions">
                        <button class="btn-purchase" id="purchaseBtn">
                            🛒 구매하기
                        </button>
                        <button class="btn-wishlist-add" id="addWishlistBtn">
                            ♡ 위시리스트
                        </button>
                        <div class="ai-dropdown">
                            <button class="btn-ai-features" id="aiDropdownBtn">
                                🤖 AI 기능
                            </button>
                            <div class="ai-dropdown-menu" id="aiDropdownMenu">
                                <button class="ai-dropdown-item" id="compareBtn">
                                    📊 도서 비교
                                </button>
                                <button class="ai-dropdown-item" id="discussBtn">
                                    💬 AI 책토론
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 탭 메뉴 -->
            <nav class="book-tabs">
                <button class="tab-btn active" data-tab="description">책 소개</button>
                <button class="tab-btn" data-tab="toc">목차</button>
                <button class="tab-btn" data-tab="author">저자 소개</button>
                <button class="tab-btn" data-tab="reviews">리뷰 (<span id="reviewCount">0</span>)</button>
            </nav>

            <!-- 탭 컨텐츠 -->
            <div class="tab-content-container">
                <!-- 책 소개 -->
                <section class="tab-content active" id="descriptionTab">
                    <h2 class="section-title">책 소개</h2>
                    <div class="book-description" id="bookDescription"></div>
                </section>

                <!-- 목차 -->
                <section class="tab-content" id="tocTab">
                    <h2 class="section-title">목차</h2>
                    <div class="book-toc">
                        <ol id="bookToc"></ol>
                    </div>
                </section>

                <!-- 저자 소개 -->
                <section class="tab-content" id="authorTab">
                    <h2 class="section-title">저자 소개</h2>
                    <div class="author-info">
                        <div class="author-profile">
                            <div class="author-image">
                                <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Crect fill='%23ddd' width='120' height='120'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999'%3E저자%3C/text%3E%3C/svg%3E"
                                    alt="저자" id="authorImage">
                            </div>
                            <div class="author-details">
                                <h3 class="author-name" id="authorName"></h3>
                                <div class="author-bio" id="authorBio"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 리뷰 -->
                <section class="tab-content" id="reviewsTab">
                    <div class="reviews-header">
                        <h2 class="section-title">리뷰</h2>
                        <a href="/review-write.html" class="btn-write-review" id="writeReviewBtn">리뷰 작성</a>
                    </div>

                    <div class="reviews-summary">
                        <div class="summary-score">
                            <div class="score-big">0.0</div>
                            <div class="score-stars">☆☆☆☆☆</div>
                            <div class="score-count">0명의 평가</div>
                        </div>
                        <div class="summary-distribution">
                            <div class="dist-row">
                                <span class="dist-label">5점</span>
                                <div class="dist-bar">
                                    <div class="dist-fill" style="width: 0%"></div>
                                </div>
                                <span class="dist-count">0</span>
                            </div>
                            <div class="dist-row">
                                <span class="dist-label">4점</span>
                                <div class="dist-bar">
                                    <div class="dist-fill" style="width: 0%"></div>
                                </div>
                                <span class="dist-count">0</span>
                            </div>
                            <div class="dist-row">
                                <span class="dist-label">3점</span>
                                <div class="dist-bar">
                                    <div class="dist-fill" style="width: 0%"></div>
                                </div>
                                <span class="dist-count">0</span>
                            </div>
                            <div class="dist-row">
                                <span class="dist-label">2점</span>
                                <div class="dist-bar">
                                    <div class="dist-fill" style="width: 0%"></div>
                                </div>
                                <span class="dist-count">0</span>
                            </div>
                            <div class="dist-row">
                                <span class="dist-label">1점</span>
                                <div class="dist-bar">
                                    <div class="dist-fill" style="width: 0%"></div>
                                </div>
                                <span class="dist-count">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="reviews-list" id="reviewsList">
                        <p style="text-align: center; padding: 40px; color: #666;">아직 리뷰가 없습니다.</p>
                    </div>
                </section>

                <!-- 추천 도서 -->
                <section class="recommended-books">
                    <h2 class="section-title">이 책과 함께 본 책</h2>
                    <div class="recommended-grid">
                        <!-- 동적 생성 -->
                    </div>
            </div>
            </section>
        </div>
        </div>
    </main>

    <!-- ✨ 구매 선택 모달 -->
    <div class="purchase-modal" id="purchaseModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>구매처 선택</h2>
                <button class="modal-close" id="modalCloseBtn">✕</button>
            </div>

            <div class="modal-body">
                <p class="modal-description">
                    원하시는 서점에서 도서를 구매하실 수 있습니다.<br>
                    아래 버튼을 클릭하면 해당 서점 페이지로 이동합니다.
                </p>

                <div class="store-list">
                    <!-- 쿠팡 -->
                    <button class="store-item" data-store="coupang">
                        <div class="store-logo">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect fill='%23FF5A5F' width='80' height='80' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='24' font-weight='bold'%3E쿠팡%3C/text%3E%3C/svg%3E"
                                alt="쿠팡">
                        </div>
                        <div class="store-info">
                            <h3 class="store-name">쿠팡</h3>
                            <p class="store-desc">빠른 배송 · 로켓배송</p>
                        </div>
                        <div class="store-arrow">→</div>
                    </button>

                    <!-- 알라딘 -->
                    <button class="store-item" data-store="aladin">
                        <div class="store-logo">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect fill='%234A90E2' width='80' height='80' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='20' font-weight='bold'%3E알라딘%3C/text%3E%3C/svg%3E"
                                alt="알라딘">
                        </div>
                        <div class="store-info">
                            <h3 class="store-name">알라딘</h3>
                            <p class="store-desc">중고도서 · 다양한 혜택</p>
                        </div>
                        <div class="store-arrow">→</div>
                    </button>

                    <!-- 예스24 -->
                    <button class="store-item" data-store="yes24">
                        <div class="store-logo">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect fill='%23FFB800' width='80' height='80' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='20' font-weight='bold'%3E예스24%3C/text%3E%3C/svg%3E"
                                alt="예스24">
                        </div>
                        <div class="store-info">
                            <h3 class="store-name">예스24</h3>
                            <p class="store-desc">포인트 적립 · 리뷰 이벤트</p>
                        </div>
                        <div class="store-arrow">→</div>
                    </button>

                    <!-- 교보문고 -->
                    <button class="store-item" data-store="kyobo">
                        <div class="store-logo">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80'%3E%3Crect fill='%2300A651' width='80' height='80' rx='8'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23fff' font-size='16' font-weight='bold'%3E교보문고%3C/text%3E%3C/svg%3E"
                                alt="교보문고">
                        </div>
                        <div class="store-info">
                            <h3 class="store-name">교보문고</h3>
                            <p class="store-desc">매장 픽업 · 바로드림</p>
                        </div>
                        <div class="store-arrow">→</div>
                    </button>
                </div>

                <div class="modal-notice">
                    <p>
                        💡 각 서점으로 이동하며, ChaekMate는 중개 수수료를 받습니다.<br>
                        가격과 혜택은 서점마다 다를 수 있습니다.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ChaekMate</h3>
                    <p>AI 기반 도서 추천 플랫폼</p>
                </div>
                <div class="footer-section">
                    <h4>서비스</h4>
                    <a href="#">도서 검색</a>
                    <a href="/ai-recommend.html">AI 추천</a>
                    <a href="#">문장 SNS</a>
                </div>
                <div class="footer-section">
                    <h4>고객 지원</h4>
                    <a href="#">FAQ</a>
                    <a href="#">문의하기</a>
                </div>
                <div class="footer-section">
                    <h4>정보</h4>
                    <a href="#">이용약관</a>
                    <a href="#">개인정보처리방침</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 ChaekMate. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="/src/scripts/book-detail.js"></script>
</body>

</html>